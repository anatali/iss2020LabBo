<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
 
<style type="text/css">
body
{
    margin-left:  30px;
    margin-right: 30px;
};

P
{
    font-family: Tahoma;
    font-size: 10pt;
};

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
}

a:hover {
    background-color: #cccccc;
}


hr {
    clear: both;
    height: 1px;
    color: #242424;
    background-color: transparent;
}

h1, h2, h3 {
    color: #242424;
    clear: left;
    font: 100% Tahoma, Helvetica, Arial, sans-serif;
    margin-bottom: 0.5em;
    padding-top: 0.5em;
	border-radius: 10px;
	padding: 5px;
}

top {
	width: 100%;
}


#i {
    color: #ff1010;
}
tt{
	font-family: "Arial";
    font-size: 80%;
	color: #006600;
}
em{
	font-family: "Arial";
    font-size: 80%;
	font-weight: bold;
	border-style:solid;
	border-color: #abe876;
    color: #1632cc;
}
bc{
	font-family: "Arial";
	font-size: 80%;
	font-weight: bold;
    color: #990000;
	background-color: #fcf8c7;
}
ks{
	font-family: "Arial";
	font-weight: bold;
    color: #0000CD	;
	 
}
kc{
	font-family: "Arial";
	font-weight: bold;
    color: #008000	;
	 
}
pre{
	font-family: 8"Consolas";
	font-size: 90%;
	background-color: #f5f5f5;
	border: 1.0px solid silver;
	padding: 2px;
}
m{
	font-family: "Helvetica";
	line-height: 100%;
 	font-size: 75%;
}
div.body{
	width: 700px;
    font-size: 15px;
}
k{
    color: #990000;
	font-weight: bold;
}
h1 {
    font-size: 150%;
    background-color: #b2c0ff;
	padding: 10px; 
}

h2 {
    background-color: #9ed8ff;
    font-size: 130%;
}

h3 {
	background-color: #e6ccff;
    font-size: 100%;
}
h4 {
    background-color: #C0F0E0;
    font-size: 100%;
	width: 95%;
	border-radius: 5px;
	padding: 2px;
}
h5 {
    background-color: #d5ffb0;
    font-size: 100%;
	
}    
div.req{
	background-color: #d9ffb3;
    font-size: 18px;
	width: 700px;
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}       
div.remark{
	background-color: #E3F2FD;	
    border: 1.5px solid #d5f2ed;
    padding: 15px;
    margin: 10px;
	border-radius: 25px;
}  
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
} 

ol, ul, li {
  margin: 0;
  margin-left: 10px;
  padding: 0;
  padding-bottom: 5px;
}     

table, th, td {
	border: 1px solid black;
}

img {
	border: 1.5px solid #d5f2ed
	
}

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
}

div.wrapdesc{
	width: 90%;
	margin: auto;
}

div.imagedesc{
	width: 85%;
	margin: auto;
}
</style>
    
<head>
   
<title>Webfluxintro</title></head>
    
<body>
<div id="body">
<h1>LabSpringIntro  | Introducion to WebFlux </h1>
<!--
<h2>References</h2>
<ul>
<li><a href="https://dev-itel.atlassian.net/wiki/spaces/NEXTAGORA/overview" target="web">Confluence space: Nextagora</a> </li>
<li><a href="https://dev-itel.atlassian.net/wiki/spaces/UNIBO/overview" target="web">Confluence space: UNIBO</a> </li>
<li><a href="https://bitbucket.org/itelunibo/workspace/projects/" target="web">Projects on bitbucket</a> </li>
<li><a href="https://bitbucket.org/itelunibo/overviewrepo/src/master/it.unibo.itel/userDocs/3-LogicalArch/HDA_Disi.html" target="web">HDA_Disi.html (overviewrepo)</a> </li>
<hr/>

</ul>
 
<ul>
<li><a href="http://htmlpreview.github.com/?https://github.com/anatali/natmaterial/blob/master/health/userDocs/HealthReferences.html" target="web"> 
DISI - HealthReferences.html</a> (on <tt>natmaterial .... health/userDocs/</tt>) </li>
<li><a href="http://htmlpreview.github.com/?https://github.com/anatali/natmaterial/blob/master/health/userDocs/HealthReferences.html" target="web">DISI - HealthReferences.html </a></li>
 <li><a href="./MirthIntro.html" target="web"> 
DISI - MirthIntro.html</a> (on <tt>natMicroservices .... it.unibo.mirth.java/userDocs/MirthExperiments.html/</tt>) </li>
<li><a href="http://htmlpreview.github.com/?https://github.com/anatali/natmaterial/blob/master/it.unibo.hapi2.2/userDocs/HapiUsage.html" target="web"> 
DISI - HapiUsage.html</a> (on <tt>natMicroservices .... it.unibo.hapi2.2/userDocs/</tt>) </li>
<li><a href="http://htmlpreview.github.com/?https://github.com/anatali/natmaterial/blob/master/it.unibo.mirth.java/userDocs/HapiFhirUsage.html" target="web"> 
DISI - HapiFhirUsage.html</a> (on <tt>natMicroservices .... it.unibo.mirth.java/userDocs/</tt>) </li>
</ul>
 
 -->

<!-- http://192.168.1.244/debug/clip.html -->

<div class="remark">
<a href="https://docs.spring.io/spring-framework/docs/5.0.0.BUILD-SNAPSHOT/spring-framework-reference/html/" 
target="web">Spring Framework Reference Documentation</a> (5.0.0.BUILD-SNAPSHOT)<br/>
<a href="https://docs.spring.io/spring-framework/docs/5.0.0.BUILD-SNAPSHOT/spring-framework-reference/html/web-reactive.html" 
target="web">23. WebFlux framework</a><br/>

<hr/>
See also:
 <a href="http://htmlpreview.github.com/?https://github.com/anatali/iss2020LabBo/blob/master/webspring.intro/userDocs/LabSpringIntro.html" target="web">  
LabSpringIntro | Introduction to Spring Boot</a> 
<!--
<a href="https://spring.io/projects/spring-boot" target="web">Spring Boot 2.3.2</a><br/>
<a href="https://www.tutorialspoint.com/spring_boot/index.htm" target="web">Spring Boot Tutorial</a><br/>
<a href="https://www.vogella.com/tutorials/SpringBoot/article.html" target="web">Spring Boot Tutorial (Vogella)</a><br/>
<a href="https://www.tutorialspoint.com/spring_boot/spring_boot_introduction.htm" target="web">Spring Boot - Introduction</a>
(TutorialsPoint: <i>Micro Service, Auto Configuration, Application, Component Scan</i>)<br/>
-->
</div> 


<h2>About Reactor</h2>

<ul>
<li><a href="https://projectreactor.io/docs/core/release/reference/index.html" target="web">Reactor 3 Reference Guide (<ks>R3RFG</ks>)</a></li>
<li><a href="https://projectreactor.io/docs/core/release/reference/index.html#intro-reactive" target="web">
<ks>R3RFG  | 3.</ks> Introduction to Reactive Programming</a> 
(<i>Iterable, Asynchronicity, Callbacks, Futures, CompletableFuture, Backpressure, Operators, Hot vs Cold</i>)</li>
<li><a href="https://projectreactor.io/docs/core/release/reference/index.html#intro-reactive" target="web">
<ks>R3RFG  | 4.</ks> Reactor Core Features</a> 
(<i>Publisher, Flux, Mono,  subscribe, Disposable, BaseSubscriber, ...</i>)</li>

<li><a href="https://projectreactor.io/docs/core/release/reference/#producing" target="web">
<ks>R3RFG  | 4.4.</ks> Programmatically creating a sequence</a>
(<i>generate, create, push, handle, concurrency-agnostic, Scheduler, publishOn, subscribeOn, onError, retry, Handling Exceptions,
Processor, Sink, Available Processors (Direct,Unicast,Emitter,Replay)</i>)</li>

<li><a href="https://projectreactor.io/docs/core/release/reference/#producing" target="web">
<ks>R3RFG  | 4.5.</ks> Threading and Schedulers</a>
(<i>concurrency-agnostic, Scheduler, publishOn, subscribeOn, )</i>)</li>

<li><a href="https://projectreactor.io/docs/core/release/reference/#producing" target="web">
<ks>R3RFG  | 4.6.</ks> Handling Errors</a>
(<i>onError, retry, Handling Exceptions </i>)</li>

<li><a href="https://projectreactor.io/docs/core/release/reference/#producing" target="web">
<ks>R3RFG  | 4.7.</ks> Processors</a>
(<i>Processor, Sink, Available Processors (Direct,Unicast,Emitter,Replay)</i>)</li>

<li><a href="https://projectreactor.io/docs/core/release/reference/index.html#reactor.hotCold" target="web">
<ks>R3RFG  | 9.2. </ks> Hot Versus Cold</a>
(<i>Processor, Sink, Available Processors (Direct,Unicast,Emitter,Replay)</i>)</li>




<hr/>
 <li><a href="https://www.baeldung.com/spring-webflux" target="web">Guide to Spring 5 WebFlux</a> (Baeldung)<br/>
</li>
 <li><a href=" https://howtodoinjava.com/spring-webflux/spring-webflux-tutorial/" target="web">Spring WebFlux Tutorial</a> (HowToDoInJava)<br/>
 </li>
 

 <hr/>
 <h4>From <a href="https://spring.io/team/dsyer" target="web">Dave Syer</a> (<i>Founder of Spring Cloud, Spring Boot, ...</i>)</h4>
 <li><a href="https://spring.io/blog/2016/06/07/notes-on-reactive-programming-part-i-the-reactive-landscape" 
 target="web">Notes on Reactive Programming Part I: The Reactive Landscape</a>
</li>
 <li><a href="https://spring.io/blog/2016/06/13/notes-on-reactive-programming-part-ii-writing-some-code" 
 target="web">Notes on Reactive Programming Part II: Writing Some Code</a>
</li>
<li><a href="https://spring.io/blog/2016/07/20/notes-on-reactive-programming-part-iii-a-simple-http-server-application" 
 target="web">Notes on Reactive Programming Part III: A Simple HTTP Server Application</a>

</li>
<hr/>
<li><a href="https://www.influxdata.com/blog/use-flux-to-group-shape-and-analyze-your-time-series-data/" 
 target="web">Use Flux to Group, Shape, and Analyze Your Time Series Data</a></li>
 <li>
 <a href="https://docs.influxdata.com/flux/v0.7/introduction/getting-started" 
 target="web">InfluxData’s new functional data scripting language</a>

 </li>
 <hr/>
 <li><a href="https://www.nurkiewicz.com/2019/02/rxjava-vs-reactor.html" target="web">RxJava vs Reactor</a></li>
<li><a href="https://spring.io/blog/2019/10/15/simple-event-driven-microservices-with-spring-cloud-stream" 
target="web">Simple Event Driven Microservices with Spring Cloud Stream</a></li>
 
</ul>


<h3>About Hooks.onOperatorDebug</h3>
<li><a href="https://projectreactor.io/docs/core/release/reference/index.html#reactor.hotCold" target="web">
<ks>R3RFG  | 7.2. </ks> Activating Debug Mode - aka tracebacks</a> </li>

In reactor, <tt>Hooks.onOperatorDebug()</tt> instruments the Reactor operators to collect more information about 
the current stack during the execution. This has a performance cost, and should not be done in production. 
This is a static call that needs to be done only once per JVM execution, so no need to repeat it for every controller call. 
With Spring Boot, this is done automatically for you is you have the spring-boot-devtools dependency on classpath.
<br/><br/>
Since Spring Boot 2.1, you can get better logs for web-related operations by setting to DEBUG the web logging group, 
so <tt>logging.level.web=debug</tt>. This will log useful information about web requests processing.

<h3>About Spring events (to remove???)</h3>
<ul>
  <li><a href="https://reflectoring.io/spring-boot-application-events-explained/" target="web">
  Spring Boot Application Events Explained</a> (Tom Hombergs)</li>

<li><a href="https://www.baeldung.com/spring-events" target="web">Spring Events</a> (Baeldung)</li>
<li><a href="https://howtodoinjava.com/spring-core/how-to-publish-and-listen-application-events-in-spring/" 
target="web">Spring – Application events</a> (HowToDoInJava)</li>
</ul>


<h2>Examples</h2>
<a href="https://projectreactor.io/docs/core/release/reference/index.html#core-features" target="web">
<ks>R3RFG | 4.</ks> Reactor Core Features</a><br/>
The Reactor project main artifact is reactor-core, a reactive library that focuses on the 
Reactive Streams specification and targets Java 8.

Reactor introduces composable reactive types that implement <tt>Publisher</tt> but also provide a rich vocabulary of operators: 
<tt>Flux</tt> and Mono</tt>. <br/><br/>
A <ks>Flux</ks> object represents a reactive sequence of <tt>0..N</tt> items, 
while a <ks>Mono</ks> object represents a single-value-or-empty <tt>(0..1)</tt> result.

<h3>Flux and Mono</h3>
The examples are reported in <a href="../src/main/reactiveDemo/ReactorDemo.java" target="code">ReactorDemo.java</a>
<div class="remark">
Flux (and Mono) represent an asynchronous sequence of data, and <k>nothing happens before you subscribe</k>.
</div>
<table style="width:98%">
<tbody>	
<tr>
<td style="width:50%" >
<pre>
public void demoMono() {
  Mono<String> mono1 = Mono.empty();
  Mono<String> mono2 = Mono.just("Bob");
  mono1.subscribe( item -> System.out.println("demoMono: " + item) );
  mono2.subscribe( item -> System.out.println("demoMono: " + item) );
}
</pre> 
</td>
<td>
<a href="https://projectreactor.io/docs/core/release/reference/index.html#mono" target="web"><ks>R3RFG</ks> Mono</a>:<br/>
<m>
<ul>
<li>A Mono&lt;T> is a specialized <tt>Publisher&lt;T></tt> that emits at most one item and then (optionally) terminates with an 
<ks>onComplete</ks> signal or an <ks>onError</ks> signal.</li>
</ul>
</m>
</td>
</tr>

<tr>
<td >
<pre>
public void demoFlux() {
  int n = 0;
  Flux<String> flux1 = Flux.just("A"+ n++, "B" + n++, "C"+ n++);
  Flux<String> flux2 = Flux.fromArray(new String[]{"A"+ n++, "B" + n++, "C"+ n++});
  Flux<String> flux3 = Flux.fromIterable(Arrays.asList("A"+ n++, "B" + n++, "C"+ n++));
  flux1.subscribe( item -> System.out.println("demoFlux - 1: " + item) );
  flux1.subscribe( item -> System.out.println("demoFlux - 1: " + item) );
  flux2.subscribe( item -> System.out.println("demoFlux - 2: " + item) );
  flux2.subscribe( item -> System.out.println("demoFlux - 2: " + item) );
  flux3.subscribe( item -> System.out.println("demoFlux - 3: " + item) );		
}
</pre><m></m>
</td>
<td>
<a href="https://projectreactor.io/docs/core/release/reference/index.html#flux" target="web"><ks>R3RFG</ks> Flux</a>:<br/> 
<m>
<ul>
<li>A Flux&lt;T> is a standard  <tt>Publisher&lt;T></tt> that represents an asynchronous sequence of 0 to N emitted items,
optionally terminated by either <ks>onComplete</ks> signal or an <ks>onError</ks> signal.</li>
</ul>
</m>
<a href="https://projectreactor.io/docs/core/release/reference/index.html#reactor.hotCold" target="web">
<ks>R3RFG | 9.2.</ks>  Hot Versus Cold</a>:<br/> 
<m>
<ul>
<li><em>just</em> is an example of the few hot operators in Reactor. 
It directly captures the value at <i>assembly time</i> and replays it to anybody subscribing to it later. </li>
</ul>
</m>
</td>
</tr>
 </tbody>
</table>
 
<h3>Generators</h3>
<h4> 
<td><a href="https://projectreactor.io/docs/core/release/reference/index.html#producing.generate" target="web">
<ks>R3RFG | 4.4.1.</ks>   Synchronous generate</a></h4>
<table style="width:98%">
<tbody>	
<tr>
<td style="width:65%" >
<pre>
public void demoFluxGen0() {
  Flux<String> flux = Flux.generate(
	() -> 0, 			<kc>//initial state value</kc>
	(state, sink) -> {
	  <k>sink.next</k>("3 x " + state + " = " + 3*state); 
	  if (state == 10) <k>sink.complete()</k>; 
	  return state + 1; 	<kc>//a new state for the next invocation</kc>
	});	
  flux.subscribe( item -> System.out.println("demoFluxGen0 - 1: " + item) );
  flux.subscribe( item -> System.out.println("demoFluxGen0 - 2: " + item) );
}
</pre>
</td>
<td><a href="https://projectreactor.io/docs/core/release/reference/index.html#producing" target="web">
<ks>R3RFG | 4.4.1.</ks>   Synchronous generate</a> (Example 4.11):<br/> 
<m>
the generate method takes a generator function.
</m>

</td>
</tr>

<tr>
<td>
<pre>
public void demoFluxGen1() {
  Flux<String> flux = Flux.generate(
	<k>(AtomicLong::new</k>, 	<kc>//a mutable object as the state</kc>
	(state, sink) -> {
	  long i = state.getAndIncrement();   <kc>//mutate the state</kc> 
	  sink.next</k>("3 x " + i + " = " + 3*i);
	  if (i == 5) sink.complete();
	  return <k>state</k>;  <kc>//return the same instance as the new state</kc>
	});	
  flux.subscribe( item -> System.out.println("demoFluxGen1 - 1: " + item) );
  flux.subscribe( item -> System.out.println("demoFluxGen1 - 2: " + item) );
}
</pre>
</td>
<td><a href="https://projectreactor.io/docs/core/release/reference/index.html#producing" target="web">
<ks>R3RFG | 4.4.1.</ks>   Synchronous generate</a> (Example 4.12):<br/> 
<m>
using a single <ks>AtomicLong</ks> as the state, mutating it on each round.
</m>
</td>
</tr>

<tr>
<td>
<pre>
public void demoFluxGen2() {
  Flux<String> flux = Flux.generate(
	(AtomicLong::new, 	<kc>//a mutable object as the state</kc>
	(state, sink) -> {
	  long i = state.getAndIncrement();   <kc>//mutate the state</kc> 
	  sink.next("3 x " + i + " = " + 3*i);
	  if (i == 5) sink.complete();
	  return state;  <kc>//return the same instance as the new state</kc>
	})<k>, (state) -> System.out.println("state: " + state))</k>;	
  flux.subscribe( item -> System.out.println("demoFluxGen2 - 1: " + item) );
  flux.subscribe( item -> System.out.println("demoFluxGen2 - 2: " + item) );
}
</pre>
</td>
<td><a href="https://projectreactor.io/docs/core/release/reference/index.html#producing" target="web">
<ks>R3RFG | 4.4.1.</ks>   Synchronous generate</a> (Example 4.12,  <k>with a consumer</k>):<br/> 
<m>
the <k>Consumer</k> lambda could close a connection or  handle any tasks that should be done at the end of the process.
</m>
</td>
</tr>
 
 </tbody>
</table>

<h4>create and push</h4>

<table style="width:98%">
<tbody>	
<tr>
<td style="width:45%" >
<pre>
public void demoCreate0() {
  Flux<String> bridge = <k>Flux.create</k>(
	emitter -> { <m><kc>//emitter type= Consumer&lt;? super FluxSink&lt;String>></kc></m>
	  for (int i = 0; i < 3; i++) {
		emitter<k>.next</k>(String.valueOf(i));
	  }
  });
 bridge.subscribe(item -> System.out.println("demoCreate0 - 1: " + item));
 bridge.subscribe(item -> System.out.println("demoCreate0 - 2: " + item));
}

</pre>
</td>
<td>
<a href="https://projectreactor.io/docs/core/release/reference/index.html#producing.create" target="web">
<ks>R3RFG | 4.4.2.</ks>  Asynchronous and Multi-threaded: create</a><br/>
<m>
create is a more advanced form of programmatic creation of a Flux which is suitable for  
multiple emissions per round, even from multiple threads.</m>

</td>
</tr>


<tr>
<td><pre>
public void demoPush0() {
 Flux<String> bridge = Flux.push(sink -> {
   new Thread() {
	int n = 0;
	public void run() {
	  while( n < 5 ) {
		sink.next("a" + n++);
		try {
			Thread.sleep(500);
		} catch (InterruptedException e) {
			e.printStackTrace();
		}
	  }//while
	  sink.complete();
	}//run
   }.start();		 
 });		
 bridge.subscribe( item -> System.out.println("demoPush0 - 1: " + item));
 bridge.subscribe( item -> System.out.println("demoPush0 - 2: " + item));
}
</pre>
</td>
<td>
<a href="https://projectreactor.io/docs/core/release/reference/index.html#_asynchronous_but_single_threaded_push" target="web">
<ks>R3RFG | 4.4.3.</ks>   Asynchronous but single-threaded: push</a><br/>
<m>
push is a middle ground between generate and create which is suitable for processing events from a single producer
</m>
</td>
</tr>

<tr>
<td>
</td>
<td>
</td>
</tr>
 </tbody>
</table>

<h4>Hot publishers</h4>

<table style="width:98%">
<tbody>	
<tr>
<td style="width:45%" >
<pre>
public void demoHot0() {
 DirectProcessor<String> hotSource = <k>DirectProcessor</k>.create();
 Flux<String> hotFlux              = hotSource.map(String::toUpperCase);

 <ks>hotFlux.subscribe</ks>(d -> System.out.println("Subscriber 1: "+d));

 hotSource<k>.onNext</k>("blue");
 hotSource<k>.onNext</k>("green");

 <ks>hotFlux.subscribe</ks>(d -> System.out.println("Subscriber 2: "+d));

 hotSource<k>.onNext</k>("orange");
 hotSource<k>.onNext</k>("purple");
 
 hotSource.<k>onComplete</k>();		
}

</pre>
</td>
<td>
<a href="https://projectreactor.io/docs/core/release/reference/index.html#reactor.hotCold" target="web">
<ks>R3RFG | 9.2.</ks>  Hot Versus Cold</a><br/>
<m>
Hot publishers <k>do not depend on any number of subscribers</k>.<br/>
They might start publishing data right away and would continue doing so whenever a new Subscriber comes in 
(in which case, the subscriber would see only new elements emitted after it subscribed). 
<br/><br/>
For hot publishers, <k>something does indeed happen before you subscribe</k>.
</m>
</td>
</tr>

 </tbody>
</table>

<h3>Functional programming style</h3>

<table style="width:98%">
<tbody>	
<tr>
<td style="width:45%" >
<pre>
</pre>
</td>
<td>
</td>
</tr>

<tr>
<td>
</td>
<td>
</td>
</tr>
 </tbody>
</table>

<h1>Building Applications</h1>
<h2>Start-up</h2>
 
<ol>
<li>Connect to <a href="https://start.spring.io/">https://start.spring.io/</a> </li>
<li>Select <tt>Gradle Project, Java</tt>, <tt><ks>Group=</ks>it.unibo</tt>, <tt><ks>Artifact=</ks>HealthAdapterFacade</tt>
(<tt><ks>Options</ks>:Packaging=Jar, Java=8</tt>), <m><ks>Dependencies</ks></m>:
<hr/>
<ul>
<li><bc>Spring Boot DevTools</bc> </li>
<li><bc>Spring WebFlux</bc> <m><kc>//Reactive </kc></m> </li>
<li><bc>Thymeleaf</bc> 	  <m><kc>//For m2m interaction</kc></m></li>
<li><bc>Lombok</bc>  <m><kc>//Java annotation library which helps to reduce boilerplate code</kc></m> </li>
<li><bc>Spring Boot Actuator</bc> <m><kc>//monitor and manage the application</kc></m>  </li>

 <!--
<li><bc>Spring Security</bc>                 <m><kc>//Not used at the moment</kc></m></li>
<li><bc>Spring Redis</bc>  <m><kc>//just to remember ... </kc></m></li>
-->
</ul>
Read 
<a href="https://spring.io/guides/gs/gradle/" target="code">Spring: Building Java Projects with Gradle</a>
and look at <a href="../build.gradle" target="code">build.gradle</a>.
<hr/> 
    
 </li>
<li>Click on <k>Generate</k>, unzip the generated file into your working dir and update 
 and 
<a href="../src/resources/application.properties" target="code"><ks>application.properties</ks></a> (port=<k>8082</k>): 
<ul>
<li>Set some logo for human-to-machine (<k>h2m</k>) interaction and for machine-to-machine (<k>m2m</k>) interaction</li>
<!-- <li>Enable/Disable security</li> -->
<li>Set endpoint management</li>
<li>Enables <tt>spring.jmx</tt></li>
</ul>
 
</li>

<li>Use <a href="http://patorjk.com/software/taag"  target="code">patorjk.com/software/taag</a>
to change the logo in file <a href="../src/resources/banner.txt"  target="code">banner.txt</a><br/>  </li>

 </ol>

<h2>ApplicationStep0</h2>
<ul>
<li>A set of images is stored in the directory
<a href="../upload-dir" target="code">upload-dir</a>
</li>

<li>Define in <tt>templates</tt> a GUI page: <a href="../src/resources/templates/index.html"  target="code">
index.html</a> for <k>h2m</k> interaction <br/><br/></li>
<li>Define (see <a href="https://dzone.com/articles/build-reactive-rest-apis-with-spring-webflux"  target="web">
Build Reactive REST APIs With Spring WebFlux</a> and
<a href="https://medium.com/@codespeaks/build-restful-services-with-spring-boot-2-x-in-few-steps-95c895a7abf5"  target="web">
Build RESTful Services with Spring Boot 2.X in Few Steps</a>
):<br/><br/>
<ul>
 
<li>a 'conventional' controller: 
<a href="../src/main/learningstep0/HumanInterfaceController.java"  target="code">
HumanInterfaceController.java</a> to be used with <bc>Spring Web</bc> and <bc>Thymeleaf</bc> for <em>h2m</em> interaction.<br/><br/></li>  
<li>a RestController

<a href="../src/main/learningstep0/MachineInterfaceController.java"  target="code">
MachineInterfaceController.java</a> to be used with <bc>Spring WebFlux</bc> for <em>m2m</em> interaction.<br/><br/></li>
</ul>
</li>

<li><a href="../src/main/learningstep0/HumanInterfaceController.java"  target="code">HumanInterfaceController.java</a> 
shows such a set of images 
through the HTML page <a href="../src/resources/templates/index.html"  target="code">index.html</a>
and allows an user to add an image to the set by uploading a file. Moreover it provides:
<table style="width:98%">
<tbody>	
<tr>
<td style="width:50%" >
<pre>
@PostMapping(value = BASE_PATH)
public Mono<String> createFile(
     @RequestPart(name = "file") Flux<FilePart> files)
</pre>
</td>
<td>To create a new images by using a 
<a href="../src/main/learningstep0/ImageService.java"  target="code">ImageService.java</a> that in its turn uses
<a href="../src/main/learningstep0/Image.java"  target="code">Image.java</a> 
 </td>
</tr>
 </tbody>
</table>
</li>
<li><a href="../src/main/learningstep0/MachineInterfaceController.java"  target="code">
MachineInterfaceController.java</a> 

<table style="width:98%">
<tbody>	
<tr>
<td style="width:50%" >
Provides a method to get the set of images
<pre>
@GetMapping(API_BASE_PATH + "/images")
	Flux<Image> images(){ ... </pre>
</td>
<td> 
<pre>
<m><ks>curl localhost:8082</ks><k>/api/images</k><ks> | python -m json.tool</ks>
<kc>//ON WINDOWS 10 </kc>
OUTPUT:
[
    {
        "id": 1510985485,
        "name": "basicrobotlogical.png"
    },
    {
        "id": 2032074525,
        "name": "basicRobotOnRasp.png"
    },
	...
]</m>
</pre> 
 </td>

</tr>

 <tr>
 <td>Provides a method to create an image given ... TODO 
<pre>
@PostMapping(API_BASE_PATH + "/images")
	Mono<Void> create(@RequestPart Flux<FilePart> images) { ...
</pre>
</td>
  <td></td>
 </tr>
 
 <tr>
 <td></td>
  <td></td>
 </tr> 
 </tbody>
</table>

</li>
<li>
Run <a href="../src/main/learningstep0/ApplicationStep0.java" target="code">
ApplicationStep0.java</a> and then:
<table style="width:98%">
<tbody>	
<tr>
<td style="width:33%" >
activate <m><ks>localhost:8082</ks></m>:<br/> <br/>
<img src="./img/ApplicationStep0.png" alt="ApplicationStep0.png" width="100%"><br/> 
</td>
<td style="width:33%">
 Run 
<a href="https://openjdk.java.net/tools/svc/jconsole/" target="code"><m><ks>JConsole</ks></m></a><br/> <br/>
<img src="./img/JConsoleApplicationStep0.png" alt="JConsoleApplicationStep0.png" width="100%"><br/>
</td>

<td>Run <m><ks>localhost:8082/images/basicrobotlogical.png/raw</ks></m>:<br/> <br/>
<img src="./img/ApplicationStep0AnImage.png" alt="ApplicationStep0AnImage.png" width="100%"><br/>
Immagine dopo modifica del colore di sfondo (nero)
</td>
</tr>
 </tbody>
</table>
 
 
</li>
<li></li>
</ul>

 <br/><br/>

<table style="width:98%">
<tbody>	
<tr>
<td style="width:50%" >
<h3>...</h3>
<pre>
 </pre>
</td>
<td>
 <h3>Usage</h3>
 <div class="remark">
<center>
..</center>
</div> 
</td>
</tr>
 </tbody>
</table>
 <br/><br/>
 
 
 
  

 <br/><br/>
<table style="width:98%">
<tbody>	
<tr>
<td style="width:50%" >
</td>
<td>
</td>
</tr>
 </tbody>
</table>
 <br/><br/>
</div>  

 

<div style="background-color:rgba(86, 56, 253, 0.9); width:100%;text-align:center;font-size:small;color:white">
By AN Unibo-DISI  
</div> 

</body>
</html>


 