<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <!--
<link rel="stylesheet" type="text/css" href="../css/issStyle1.css">
<script type="text/javascript" src="../css/issStyle.js"></script>
-->
<style type="text/css">
body
{
    margin-left:  30px;
    margin-right: 30px;
};

P
{
    font-family: Tahoma;
    font-size: 10pt;
};

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
}

a:hover {
    background-color: #cccccc;
}


hr {
    clear: both;
    height: 1px;
    color: #242424;
    background-color: transparent;
}

h1, h2, h3 {
    color: #242424;
    clear: left;
    font: 100% Tahoma, Helvetica, Arial, sans-serif;
    margin: 10;
    margin-right: 15px;
    margin-bottom: 0.5em;
    padding-top: 0.5em;
    border-bottom: 1px solid #242424;
}

h1 {
    font-size: 150%;
    background-color: #b2c0ff;
}

h2 {
    background-color: #d9fbff;
    font-size: 110%;
}

h3 {
	background-color: #e6ccff;
    font-size: 80%;
}
h4 {
    background-color: #99ffcc;
    font-size: 100%;
	width: 750px;
}
#i {
    color: #ff1010;
}
tt{
	font-family: "Arial";
    font-size: 80%;
	color: #006600;
}
em{
	font-family: "Arial";
    font-size: 80%;
	font-weight: bold;
	border-style:solid;
	border-color: #ccffff;
    color: #0033cc;
}
bc{
	font-family: "Arial";
	font-size: 80%;
	font-weight: bold;
    color: #990000;
	background-color: #fcf8c7;
}
k{
	font-family: "Arial";
	font-weight: bold;
    color: #990000;
	 
}
ks{
	font-family: "Arial";
	font-weight: bold;
    color: #0000CD	;
	 
}
kc{
	font-family: "Arial";
	font-weight: bold;
    color: #008000	;
	 
}
pre{
	font-family: "Helvetica";
	font-size: 90%;
	background-color: #fcf8c7;
	border: 1px solid blue;
}
m{
	font-family: "Helvetica";
	line-height: 100%;
 	font-size: 75%;
}
div.body{
	width: 800px;
    font-size: 18px;
}    
div.req{
	background-color: #d9ffb3;
    font-size: 18px;
	width: 700px;
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}       
div.remark{
	background-color: #FFFC33;     
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}  
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}     
</style>
    
<head>
   
<title>Lab0ISS2020</title></head>
    
<body>
<h1>LAB0 | Tools</h1> 
     

<div class="body"> 
	<h2>GIT </h2> 
	There are many info sources; for example: <a href="https://www.youtube.com/watch?v=HVsySz-h9r4"  target="web">GIT Command Line Basic (video)c</a>
	and <a href="https://confluence.atlassian.com/bitbucketserver/basic-git-commands-776639767.html"  target="code">Basic Git commands</a>.
	
	
	<h3>GIT | clone the iss2020Lab</h3>
	<ol>
	<li>Open a new, <b>empty</b> directory (e.g. <tt>iss2020</tt>)and work in it.</li>
	<li>Execute <bc>git clone  https://github.com/anatali/iss2020Lab.git </bc></li>
	<li>Execute <bc>git remote -v</bc>
	<li>Use the files as a <u>read-only reference</u>: never change them</li>
	<li>Execute <bc>git pull</bc> when needed</li>
	</ol>
	
	
	<h3>GIT | useful commands </h3> 
	<ul>
	<li><pre>git config --global core.autocrlf input  <m><kc>//Convert all CRLF line endings to LF before it stores it in the commit.</kc></m> </pre>
	When we clone a project that was created on the MS Windows platform
	MS Windows typically put append a hidden <tt>CR + LF</tt> characters on the end of each line of a text file.
	</li>
	<li><pre>git status --h</pre>
	<li><pre>git status --ignored   <m><kc>//To see the ignored files</kc></m></pre>
	<!-- <li><pre>git rm --cached build -r</pre> REMOVE from Staging area</li> -->
	</li>
	</ul>
 
    <h2>GRADLE</h2>
    See <a href="https://gradle.org/guides/" target="web">Gradle Tutorials and Guides</a> 
	
	<h3>Gradle | Basic concepts</h3>
	<ul>
	<li>Created in 2008 by Gradleware, <a href="https://docs.gradle.org/current/userguide/userguide.html" target="web">Gradle</a> 
	is mostly implemented in Java 5, with an outer layer in Groovy or Kotlin.</li>
	<li><m><k>Gradle project</k></m>: the semantics is up to us (e.g. build a library JAR, a web application ...).
	A project does not necessarily represent a <i>thing to be built</i>. It might represent a  <m><k>thing to be done</k></m>, 
		such as deploying your application to staging or production environments. 
		Each project is made up of one or more <m><ks>tasks</ks></m>.</li>
	<li><m><k>Gradle task</k></m>: atomic piece of work (e.g. compiling some classes, creating a JAR,...) which a build performs. </li>
	<li><m><k>Gradle build script</k></m>:  Gradle executes <m><ks>build.gradle</ks></m> as a set of 'declarative' sentences written as a Groovy or Kotlin script. 
	These languages promote the creation of <a href="https://en.wikipedia.org/wiki/Domain-specific_language" target="web">Domain-specific language (DSL)</a>.
	In particular:
		<ul>
		<li>Every task has a list of <m><k>actions</k></m>, and when it executes it runs all of them in the order they are declared.	</li>
		<li>The default task has only actions <tt>doFirst</tt> and <tt>doLast</tt>.</li>
		<li>Tasks can declare dependencies among each other: one task may need other tasks to complete successfully.</li>
		<li>The less dependencies are declared, the faster is the build (due to parallelization).</li>
		<li>Transitive dependencies are resolved automatically (if available in the repository <m><k>Maven Central / JCenter</k></m>).</li>
		</ul>
</li>
	<li><m><k>Gradle plugin</k></m>: Gradle at its core intentionally provides very little for real world
automation. All of the useful features, are added by plugins (written in Groovy), that provide concepts, configuration blocks, and tasks  reusable across projects.
	</li>
	<li><m><k>Gradle Java plugin</k></m>: introduces the concept of source set, with an associated compile classpath
and runtime classpath, with defaults that copy the Maven conventions:
		<ul>
		<li>main containing <m><ks>src/main/java</ks></m>  and <m><ks>src/main/resources</ks></m> </li>
		<li>test containing <m><ks>src/test/java</ks></m>  and <m><ks>src/test/resources</ks></m> </li>
		</ul>
	</li>
	<li><m><k>Gradle <a href="https://docs.gradle.org/current/userguide/gradle_wrapper.html" target="web">wrapper</a></k></m>: 
		a script that invokes a declared version of Gradle, downloading it beforehand if necessary.
	
		<ul>
 		<li><tt>gradle/wrapper/gradle-wrapper.properties</tt>, stores the information about the Gradle distribution.</li>
		<li><m><ks>gradle wrapper --gradle-version 2.11</ks></m> downloads <tt>version 2.11</tt>. </li>
		<li><m><ks>./gradlew <task></ks></m> runs <tt><task></tt> with that exact version.</li>
 
		</ul>
	</li>
	</ul>
	<h3>Gradle | Hands on</h3>
    <ol>
        <li> See <a href="https://riptutorial.com/it/gradle" target="web">Gradle Tutorials and Guides</a> and <br/>
		<a href="https://gradle.org/install/" target="code">Download <tt>gradle</tt></a> (using <tt>zip</tt> or <tt>SDKMAN</tt>). Current version: <tt>6.2.2</tt>.</li>
        <li>Set <tt>GRADLE_HOME</tt> to the unpacked Gradle files and add <tt>GRADLE_HOME/bin</tt> to your <tt>PATH</tt> environment variable.
		Execute <bc>gradle -v</bc>.</li>
        <li>Create a work dir (e.g. <tt>iss2020</tt>) and work in it.</li>
        <!-- <li>Execute <bc>gradle wrapper</bc> 
		(see <a href="https://docs.gradle.org/current/userguide/gradle_wrapper.html" target="web">https://docs.gradle.org/current/userguide/gradle_wrapper.html</a>)
		</li> -->
        <li>Execute <bc>gradle init</bc> and select  Java-application, Groovy,  Junit<br/><br/>
		   <center><img src="./img/gradlew.png" alt="gradlew.png" width="60%" height="60%"></center><br/><br/>
		</li>
		<li>Look at <tt>gradle/gradle-wrapper.properties</tt>.</li>
		<li>Look at the generated files:
		
<table style="width:58%">
 <tr>
	<td style="width:50%">	 
	<h3>build.gradle</h3>
	<pre><m><kc>/*
 * This file was generated by the Gradle 'init' task...
 */</kc>
<k>plugins</k> {
    <kc>// Apply the java plugin to add support for Java</kc>
    id 'java'

    <kc>// Apply the application plugin to add support 
	// for building an application</kc>
    id 'application'
}
<k>repositories</k> {
    <kc>// Use jcenter for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.</kc>
    jcenter()
}
<k>dependencies</k> {
    <kc>// This dependency is found on compile classpath
    // 	of this component and consumers.</kc>
    implementation 'com.google.guava:guava:27.0.1-jre'

    <kc>// Use JUnit test framework</kc>
    testImplementation 'junit:junit:4.12'
}
<kc>// Define the main class for the application</kc>
<k>mainClassName</k> = 'iss2020.App'</m></pre>
	</td>
	<td style="width:50%"> 
	<h3>.gitignore</h3>
		<pre><m>
<kc># Ignore Gradle project-specific cache directory</kc>
.gradle

<kc># Ignore Gradle build output directory</kc>
build		
			</m></pre>
			
<div class="remark"><m>
Note the directory <ks>Test</ks> and the file <tt>AppTest</tt>.</m>
</div>			
	</td>
	</tr>
 </table>	
 <br/>
</li>
		
<li>		 
Execute the generated Application:<br/><br/>
<table style="width:80%">
 <tr>
		
     <td style="width:50%"><h3>App.java</h3>
<pre><m><kc>/*
 * This Java source file was generated ...
 */</kc>
package iss2020;

public class App {
    public String getGreeting() {
        return "Hello world.";
    }

    public static void main(String[] args) {
        System.out.println(
			new App().getGreeting());
    }
}			</m></pre>
	</td>
	<td>
Execute <bc>gradle run</bc>. <br/><br/>
The resullt is:
<pre>Task :run
<ks>Hello world.</ks>

BUILD SUCCESSFUL in 10s
2 actionable tasks: 2 executed
</pre>	

	</td>
	</tr>
 </table>		
 		</li>
    </ol>



	<h3> GRADLE project | Add GIT and experiment</h3>	
	<ul>
	<li>Execute <bc>git init</bc> within directory  <tt>iss2020</tt> introduced above. </li>
	<li>Execute <bc>git status</bc>.</li>
	<li></li>
	<li>Execute <bc>git add -A</bc> and <bc>git status</bc>.</li>
	<li>Execute <bc>git reset</bc> to undo staging.</li>
	<li></li>
	<li>Execute <bc>git remote add origin https://github.com/... </bc> to connect to a remote <tt>GIT</tt>.</li> 
	<!-- git remote add origin https://github.com/anatali/lss0 -->
	<li>Execute <bc>git remote -v</bc>
	<li>Execute <bc>git checkout master</bc> and  <bc>git merge origin/master --allow-unrelated-histories</bc> if needed. </li>
	<li>Execute <bc>git push origin master</bc> to update the remote <tt>GIT</tt> </li>
	<li></li>
	<li>Execute <bc>git commit -m "First"</bc> and <bc>git status</bc>.</li>
	<li>Execute <bc>git log</bc>.</li>
<!--	<li></li>
	<li>Execute <bc>git rm file.txt (--cached file.txt)</bc>  to delete (remove) files.</li>

	<li>Execute <bc>git config --list</bc>.</li>
	<li>Execute <bc>git config --global user.name "Your Name"</bc>, <bc>git config --global user.email "Your Email"</bc> </li>


	<li>Edit the file <a href="../.gitignore" target="code">.gitignore</a></li>
 -->	</ul>
 
	<h3>From Java to Kotlin using IntelliJ IDEA</h3> 
	<ol>
		<li>Copy <tt>App.java</tt> in a new class named <tt>AppOriginal.java</tt></li>
		<li>Open the current working folder (mouse on it) as <m><ks>IntelliJ IDEA Community Edition Project</ks></m>.  
		Note the selection on <tt>use default gradlew wrapper (reccomended)</tt>. If you have upgraded gradle, 
		you should also select <tt>file -> invalidate cache and restart</tt> or (better) update IntelliJ to the latest stable version.</li>
		<li>Select <tt>App.java</tt> and click on <i>Convert Java file to Kotlin file</i> (<tt>CTRL-ALT-SHIFT-K</tt>)
		and click on the link pop-up <m><ks>configure kotlin</ks></m> and on <m><ks>enable auto-import</ks></m>.
		Note the tasks added in <ks>build.gradle</ks></li>
		<li>compare the generated <tt>App.kt</tt> with the original <tt>App.java</tt></li>
		<!-- <li>In <a href="../build.gradle" target="code">build.gradle</a>, set <tt>mainClassName='App<k>Kt</k>'</tt></li> -->
		<li>Execute <bc>gradle run</bc> </li>
	</ol>

	
	<h3>From Gradle to Eclipse</h3>
	
	<ol>
         <li>Open Eclipse in a new  workspace  </li>
        <li>Select <m><ks>Import projects -> Gradle -> existing Gradle project</ks></m> ...  the project in  <tt>iss2020</tt>.</li>
		<li>Look at the generated files <tt>.classpath</tt> and <tt>.project</tt></li>
 		<li>Look at the file <tt>Test.java</tt> that now contains errors.</li>
		<li>Mouse on project, click rigtht and select <m> <ks>Configure Kotlin -> add kotlin nature</ks></m> </li>
		<li>Observe that <tt>Test.java</tt> still contains errors.</li>
		<li>In <tt>build.gradle</tt> add  <ks>id 'eclipse'</ks> within <ks>plugins</ks></li>
        <li>Execute <bc>gradle build eclipse </bc></li>
        <li>Run the Test with Junit	</li>
 	</ol>
    
	<h2>Iss-unibo specific configuration</h2>
	<ol>
		<li>Download <a href="https://www.eclipse.org/downloads/packages/release/juno/sr2/eclipse-ide-java-and-dsl-developers" target="web"><bc>Eclipse - DSL</bc></a></li>
	 	<li>Add <tt>plugin for Kotlin</tt> </li>
 		<li>Add <b>Kotlin nature</b>  to a project:  <bc>kotlin-stdlib.jar, kotlin-reflect.jar</bc> were added to the project classpath.</li>
		<li>Add  a <tt>Terminal</tt> (optional)</li>
		<li>Copy into the directory <k>dropins</k>:
			<ul>
			<li><tt>it.unibo.issLabStart\resources\plugins\it.unibo.Qactork_x.y.z.jar</tt></li>
			<li><tt>it.unibo.issLabStart\resources\plugins\it.unibo.Qactork.ide_x.y.z.jar</tt></li>
			<li><tt>it.unibo.Qactork.ui_x.y.z.jar</tt></li>
			</ul>
		</li>
		<li>Restart Eclipse</li>
	</ol>
<!--	
<h2>Working in Kotlin</h2>
	<ol>
	 	<li>Execute <bc>gradle init</bc> and select Kotlin-application, Groovy, Junit </li>
		<li>In Eclipse select <m><ks>Import projects -> Gradle -> existing Gradle project</ks></m> ... the created project.</m></li>
		<li>select the <bc>project -> Configure Kotlin -> Add a Kotlin nature</bc> to the project. This action allows us to run <m><ks>App.kt</ks></m>.</li>
	</ol>
--> 
	
</div>  
<div style="background-color:rgba(86, 56, 253, 0.9); width:100%;text-align:center;font-size:small;color:white">
By AN Unibo-DISI    
</div> 
</body>
</html>